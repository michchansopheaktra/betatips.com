{% extends "base.html" %}
{% load static %}
{% block content %}

<section class="my-5">
	<div class="container">
		<div class="row justify-content-center align-items-center">
			<div class="col-lg-10">
				<div class="shadow rounded p-5 bg-white">
					<div class="row">
						<div class="col-lg-12">


                        <h2 class="text-center py-3">{% if form.instance.pk %}Edit Service{% else %}Add New Service{% endif %}</h2>

                        <form method="post">
                            {% csrf_token %}
                            {{ form.as_p }}
                            <button type="submit" class="btn btn-success">{% if form.instance.pk %}Update{% else %}Create{% endif %}</button>
                            <a href="{{ request.META.HTTP_REFERER|default:'/' }}" class="btn btn-secondary">Cancel</a>
                        </form>

                        <hr>

                        <h3 class="my-5">üóÇÔ∏è All Services</h3>

                        <div class="row">
                            {% for service in services %}
                                <div class="col-md-4 col-sm-6 mb-4">
                                    <div class="card h-100 shadow-sm">
                                        
                                        <div class="card-body d-flex flex-column">
                                            <h5 class="card-title">{{ service.title }}</h5>
                                            {% if service.link %}
                                                <a href="{{ service.link }}" target="_blank" class="card-link mb-2 text-truncate" style="overflow-wrap: break-word;">
                                                    {{ service.link }}
                                                </a>
                                            {% endif %}
                                            <p class="card-text">{{ service.description|truncatewords:20 }}</p>
                                            <div class="mt-auto">
                                                <a href="{% url 'service_update' service.pk %}" class="btn btn-sm btn-outline-danger px-3">
                                                    <i class="bi bi-pencil-square"></i> Edit
                                                </a>
                                                <a href="{% url 'service_delete' service.pk %}" class="btn btn-sm btn-outline-danger px-3">
                                                    <i class="bi bi-trash3 me-1"></i> Delete
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% empty %}
                                <div class="col-12">
                                    <p>No services available.</p>
                                </div>
                            {% endfor %}
                            
                        </div>




                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}